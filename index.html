<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente de Cancelaciones Nu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'nu-purple': '#820AD1',
                        'nu-purple-dark': '#6B08AC',
                        'nu-purple-light': '#9B2DE0',
                        'nu-gray': '#F5F5F5',
                        'nu-gray-dark': '#E0E0E0',
                        'nu-success': '#00A650',
                        'nu-warning': '#FF9500',
                        'nu-danger': '#E53935',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'Arial', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        .checkbox-custom:checked {
            background-color: #820AD1;
            border-color: #820AD1;
        }
        .checkbox-custom:checked::after {
            content: '‚úì';
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-in {
            animation: slideIn 0.4s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .copy-btn:active {
            transform: scale(0.95);
        }
        .progress-fill {
            transition: width 0.5s ease-in-out;
        }
        .section-card {
            transition: all 0.3s ease;
        }
        .section-card:hover {
            box-shadow: 0 4px 20px rgba(130, 10, 209, 0.1);
        }
        .alert-shake {
            animation: shake 0.5s ease-in-out;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body class="bg-nu-gray min-h-screen font-sans">
    <!-- Header -->
    <header class="bg-nu-purple text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
                        <span class="text-nu-purple font-bold text-xl">Nu</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">Asistente de Cancelaciones</h1>
                        <p class="text-sm text-purple-200">Gu√≠a paso a paso para agentes</p>
                    </div>
                </div>
                <div id="progressContainer" class="hidden">
                    <div class="flex items-center space-x-3">
                        <span class="text-sm">Progreso:</span>
                        <div class="w-48 h-3 bg-purple-300 rounded-full overflow-hidden">
                            <div id="progressBar" class="h-full bg-white progress-fill rounded-full" style="width: 0%"></div>
                        </div>
                        <span id="progressText" class="text-sm font-semibold">0%</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">
        <!-- Product Selection -->
        <section id="productSelection" class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Selecciona el Tipo de Producto a Cancelar</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <button onclick="selectProduct('credito')" class="product-btn bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-nu-purple group">
                    <div class="w-16 h-16 mx-auto mb-4 bg-nu-purple rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 text-center">Tarjeta de Cr√©dito</h3>
                    <p class="text-sm text-gray-500 text-center mt-2">Tradicional</p>
                </button>

                <button onclick="selectProduct('nucontrol')" class="product-btn bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-nu-purple group">
                    <div class="w-16 h-16 mx-auto mb-4 bg-nu-purple rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 text-center">Nu Control / Abre Caminos</h3>
                    <p class="text-sm text-gray-500 text-center mt-2">Tarjeta de Cr√©dito</p>
                </button>

                <button onclick="selectProduct('cuenta')" class="product-btn bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-nu-purple group">
                    <div class="w-16 h-16 mx-auto mb-4 bg-nu-purple rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 text-center">Cuenta de Ahorros</h3>
                    <p class="text-sm text-gray-500 text-center mt-2">D√©bito</p>
                </button>

                <button onclick="selectProduct('multiproducto')" class="product-btn bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 border-2 border-transparent hover:border-nu-purple group">
                    <div class="w-16 h-16 mx-auto mb-4 bg-nu-purple rounded-full flex items-center justify-center group-hover:scale-110 transition-transform">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                        </svg>
                    </div>
                    <h3 class="font-semibold text-gray-800 text-center">Multiproducto</h3>
                    <p class="text-sm text-gray-500 text-center mt-2">Cr√©dito + D√©bito</p>
                </button>
            </div>
        </section>

        <!-- Checklist Container -->
        <div id="checklistContainer" class="hidden fade-in">
            <!-- Weduka Links Banner -->
            <div id="wedukaLinks" class="bg-white rounded-2xl shadow-md p-4 mb-6 border-l-4 border-nu-purple">
                <div class="flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center space-x-2">
                        <svg class="w-5 h-5 text-nu-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="font-semibold text-gray-700">Documentaci√≥n Weduka:</span>
                    </div>
                    <div id="wedukaLinksContainer" class="flex flex-wrap gap-2">
                        <!-- Links will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Selected Product Info -->
            <div id="selectedProductInfo" class="bg-nu-purple text-white rounded-2xl p-4 mb-6 flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <p class="text-sm text-purple-200">Producto seleccionado:</p>
                        <p id="selectedProductName" class="font-bold text-lg"></p>
                    </div>
                </div>
                <button onclick="resetSelection()" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                    Cambiar Producto
                </button>
            </div>

            <!-- Alert for Abre Caminos when canceling Cuenta -->
            <div id="abreCaminosAlert" class="hidden bg-nu-warning/10 border-2 border-nu-warning rounded-2xl p-4 mb-6 fade-in">
                <div class="flex items-start space-x-3">
                    <div class="w-10 h-10 bg-nu-warning rounded-full flex items-center justify-center flex-shrink-0">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                    </div>
                    <div>
                        <h4 class="font-bold text-nu-warning">‚ö†Ô∏è Importante - Tarjeta Abre Caminos</h4>
                        <p class="text-gray-700 mt-1">Si el cliente tiene una <strong>Tarjeta Abre Caminos</strong>, es <strong>OBLIGATORIO</strong> cancelarla primero antes de la cuenta de ahorros, ya que esta tarjeta depende de la Cajita de Respaldo de la cuenta.</p>
                        <p class="text-gray-600 text-sm mt-2">Nota: La tarjeta Abre Caminos S√ç puede cancelarse sin cancelar la cuenta de ahorros.</p>
                    </div>
                </div>
            </div>

            <!-- SECTION 1: Inicio y Seguridad -->
            <div class="section-card bg-white rounded-2xl shadow-md p-6 mb-6 slide-in" style="animation-delay: 0.1s">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-nu-purple rounded-full flex items-center justify-center text-white font-bold">1</div>
                    <h3 class="text-xl font-bold text-gray-800">Inicio y Seguridad</h3>
                    <span id="section1Status" class="ml-auto px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-600">Pendiente</span>
                </div>

                <!-- Saludo -->
                <div class="bg-nu-gray rounded-xl p-4 mb-4">
                    <h4 class="font-semibold text-gray-700 mb-2">üì¢ Mensaje de Bienvenida</h4>
                    <div class="bg-white rounded-lg p-4 border border-gray-200">
                        <p class="text-gray-700 italic">"Hola <span class="text-nu-purple font-semibold">[Nombre Cliente]</span>, te habla <span class="text-nu-purple font-semibold">[Nombre Agente]</span> del equipo Nu."</p>
                    </div>
                    <label class="flex items-center space-x-3 mt-3 cursor-pointer">
                        <input type="checkbox" id="checkSaludo" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                        <span class="text-gray-700">Saludo realizado</span>
                    </label>
                </div>

                <!-- Hard Filters -->
                <div class="bg-nu-gray rounded-xl p-4 mb-4">
                    <h4 class="font-semibold text-gray-700 mb-2">üîê Hard Filters (Validaci√≥n de Seguridad)</h4>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" id="checkHardFilter1" onchange="updateProgress(); validateHardFilters()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                            <span class="text-gray-700">Dato de Seguridad 1 Verificado</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="checkbox" id="checkHardFilter2" onchange="updateProgress(); validateHardFilters()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                            <span class="text-gray-700">Dato de Seguridad 2 Verificado</span>
                        </label>
                    </div>
                    <div id="hardFilterAlert" class="hidden mt-4 bg-nu-danger/10 border-2 border-nu-danger rounded-lg p-3 alert-shake">
                        <div class="flex items-center space-x-2">
                            <svg class="w-5 h-5 text-nu-danger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                            <span class="text-nu-danger font-semibold">‚ö†Ô∏è Para cancelar se requieren 2 Hard Filters. 1 Hard Filter solo es v√°lido para Desistimiento.</span>
                        </div>
                    </div>
                </div>

                <!-- Dispositivo Autorizado -->
                <div class="bg-nu-gray rounded-xl p-4">
                    <h4 class="font-semibold text-gray-700 mb-2">üì± Verificaci√≥n de Dispositivo</h4>
                    <p class="text-sm text-gray-600 mb-3">Revisar en el sistema que el dispositivo est√© autorizado.</p>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="radio" name="deviceStatus" id="deviceTrusted" onchange="updateProgress(); checkDeviceStatus()" class="w-5 h-5 text-nu-purple focus:ring-nu-purple">
                            <span class="text-nu-success font-medium">‚úÖ TRUSTED (Autorizado)</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer">
                            <input type="radio" name="deviceStatus" id="deviceUntrusted" onchange="updateProgress(); checkDeviceStatus()" class="w-5 h-5 text-nu-purple focus:ring-nu-purple">
                            <span class="text-nu-danger font-medium">‚ùå UNTRUSTED / PENDING VALIDATION</span>
                        </label>
                    </div>
                    <div id="deviceAlert" class="hidden mt-4 bg-nu-danger/10 border-2 border-nu-danger rounded-lg p-3">
                        <p class="text-nu-danger font-semibold">‚ö†Ô∏è El dispositivo no est√° autorizado. No se puede continuar con la cancelaci√≥n hasta que el dispositivo sea validado.</p>
                    </div>
                </div>
            </div>

            <!-- SECTION 2: Motivo y Retenci√≥n -->
            <div class="section-card bg-white rounded-2xl shadow-md p-6 mb-6 slide-in" style="animation-delay: 0.2s">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-nu-purple rounded-full flex items-center justify-center text-white font-bold">2</div>
                    <h3 class="text-xl font-bold text-gray-800">Motivo y Retenci√≥n</h3>
                    <span id="section2Status" class="ml-auto px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-600">Pendiente</span>
                </div>

                <div class="bg-nu-gray rounded-xl p-4 mb-4">
                    <label class="flex items-center space-x-3 cursor-pointer mb-4">
                        <input type="checkbox" id="checkMotivo" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                        <span class="text-gray-700 font-medium">¬øIndagaste el motivo de la cancelaci√≥n?</span>
                    </label>

                    <div class="mt-4">
                        <label class="block text-gray-700 font-medium mb-2">Selecciona el motivo:</label>
                        <select id="motivoSelect" onchange="showRetencion()" class="w-full p-3 border-2 border-gray-200 rounded-lg focus:border-nu-purple focus:ring-nu-purple">
                            <option value="">-- Selecciona un motivo --</option>
                        </select>
                    </div>
                </div>

                <!-- Retenci√≥n Sugerida -->
                <div id="retencionContainer" class="hidden bg-gradient-to-r from-nu-purple/5 to-nu-purple/10 rounded-xl p-4 border-2 border-nu-purple/30">
                    <div class="flex items-center space-x-2 mb-3">
                        <svg class="w-6 h-6 text-nu-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                        <h4 class="font-bold text-nu-purple">üí° Argumento de Retenci√≥n Sugerido</h4>
                    </div>
                    <div id="retencionText" class="bg-white rounded-lg p-4 border border-nu-purple/20 text-gray-700 whitespace-pre-wrap"></div>
                    <button onclick="copyText('retencionText')" class="copy-btn mt-3 bg-nu-purple text-white px-4 py-2 rounded-lg hover:bg-nu-purple-dark transition-colors flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        <span>Copiar Texto</span>
                    </button>
                    <label class="flex items-center space-x-3 cursor-pointer mt-4">
                        <input type="checkbox" id="checkRetencion" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                        <span class="text-gray-700">Argumento de retenci√≥n aplicado</span>
                    </label>
                </div>
            </div>

            <!-- SECTION 3: Revisi√≥n de Estado (Widgets) -->
            <div class="section-card bg-white rounded-2xl shadow-md p-6 mb-6 slide-in" style="animation-delay: 0.3s">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-nu-purple rounded-full flex items-center justify-center text-white font-bold">3</div>
                    <h3 class="text-xl font-bold text-gray-800">Revisi√≥n de Estado (Widgets)</h3>
                    <span id="section3Status" class="ml-auto px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-600">Pendiente</span>
                </div>

                <div class="bg-nu-gray rounded-xl p-4 mb-4">
                    <h4 class="font-semibold text-gray-700 mb-3">üìã Checklist de Verificaci√≥n (VITAL)</h4>
                    <div class="space-y-3">
                        <!-- Checks para CR√âDITO -->
                        <div id="checksCreditoContainer" class="hidden space-y-3">
                            <div class="bg-nu-purple/10 rounded-lg p-2 mb-2">
                                <span class="text-nu-purple font-semibold text-sm">üí≥ Verificaciones Tarjeta de Cr√©dito</span>
                            </div>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="checkDeuda" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                <span class="text-gray-700">No tiene Deuda Pendiente</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="checkContracargoCredito" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                <span class="text-gray-700">No tiene contracargos pendientes</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="checkTagsCredito" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                <span class="text-gray-700">Revisar Tags de bloqueo</span>
                            </label>
                            <div id="checkCajitaRespaldoContainer" class="hidden">
                                <label class="flex items-center space-x-3 cursor-pointer">
                                    <input type="checkbox" id="checkCajitaRespaldo" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                    <span class="text-gray-700 font-medium text-nu-purple">üîí Revisar Cajita de Respaldo (Abre Caminos)</span>
                                </label>
                            </div>
                        </div>

                        <!-- Checks para CUENTA DE AHORROS -->
                        <div id="checksCuentaContainer" class="hidden space-y-3">
                            <div class="bg-nu-success/10 rounded-lg p-2 mb-2">
                                <span class="text-nu-success font-semibold text-sm">üè¶ Verificaciones Cuenta de Ahorros</span>
                            </div>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="checkSaldo" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                <span class="text-gray-700">Saldo en $0.00 (Revisar Cajitas y Disponibles)</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="checkCDT" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                <span class="text-gray-700">No tiene CDT activo</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="checkSaldoFavor" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                <span class="text-gray-700">No tiene saldo a favor</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="checkContracargoCuenta" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                <span class="text-gray-700">No tiene contracargos pendientes</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="checkTagsCuenta" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                                <span class="text-gray-700">Revisar Tags de bloqueo</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Complaints Widget -->
                <div class="bg-nu-gray rounded-xl p-4 mb-4">
                    <h4 class="font-semibold text-gray-700 mb-3">‚ö†Ô∏è Procesos Pendientes (Widget Complaints)</h4>
                    <p class="text-sm text-gray-600 mb-3">Cliente no debe tener procesos pendientes en CB, fraud, AML, etc. Validar desde el widget de Complaints.</p>
                    
                    <label class="flex items-center space-x-3 cursor-pointer mb-4">
                        <input type="checkbox" id="checkComplaints" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                        <span class="text-gray-700">Sin procesos pendientes en Complaints</span>
                    </label>

                    <div class="bg-white rounded-lg p-4 border border-gray-200">
                        <h5 class="font-medium text-gray-700 mb-2">‚úÖ Comentarios con status RESOLVED que permiten cancelar:</h5>
                        <p class="text-xs text-gray-500 mb-2 italic">Recuerda abrir el complaint para validar el comentario.</p>
                        <ul class="text-sm text-gray-600 space-y-2">
                            <li class="flex items-start space-x-2">
                                <span class="text-nu-success">‚Ä¢</span>
                                <span><strong>RESOLUTION IN FAVOUR:</strong> El ciclo del contracargo finaliz√≥, el abono temporal queda para el cx.</span>
                            </li>
                            <li class="flex items-start space-x-2">
                                <span class="text-nu-success">‚Ä¢</span>
                                <span><strong>LOST, LACK OF EVIDENCE:</strong> Decisi√≥n interna de Nu, por evidencias b√°sicas, el abono queda para el cliente.</span>
                            </li>
                            <li class="flex items-start space-x-2">
                                <span class="text-nu-success">‚Ä¢</span>
                                <span><strong>RESOLVED IN CX FAVOUR, MERCHANT REBUTTAL:</strong> A pesar de la refutaci√≥n, el caso result√≥ a favor del cliente.</span>
                            </li>
                        </ul>
                        <div class="mt-3 p-2 bg-nu-success/10 rounded border border-nu-success/30">
                            <p class="text-sm text-nu-success font-medium">üí° Disputas de 2022 o 2023: Se puede continuar con la cancelaci√≥n sin inconvenientes.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SECTION 4: Beneficios -->
            <div class="section-card bg-white rounded-2xl shadow-md p-6 mb-6 slide-in" style="animation-delay: 0.35s">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-nu-success rounded-full flex items-center justify-center text-white font-bold">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">Beneficios del Producto</h3>
                </div>

                <div id="beneficiosContainer" class="bg-gradient-to-r from-nu-success/5 to-nu-success/10 rounded-xl p-4 border-2 border-nu-success/30">
                    <div id="beneficiosContent" class="text-gray-700">
                        <!-- Se llenar√° din√°micamente -->
                    </div>
                </div>
            </div>

            <!-- SECTION 5: Condiciones (Macros) -->
            <div class="section-card bg-white rounded-2xl shadow-md p-6 mb-6 slide-in" style="animation-delay: 0.4s">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-nu-purple rounded-full flex items-center justify-center text-white font-bold">4</div>
                    <h3 class="text-xl font-bold text-gray-800">Condiciones (Macros)</h3>
                    <span id="section4Status" class="ml-auto px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-600">Pendiente</span>
                </div>

                <div class="bg-nu-gray rounded-xl p-4 mb-4">
                    <h4 class="font-semibold text-gray-700 mb-3">üìù Texto de Condiciones para el Cliente</h4>
                    <div id="condicionesText" class="bg-white rounded-lg p-4 border border-gray-200 text-gray-700 whitespace-pre-wrap mb-4">
                        <!-- Se llenar√° din√°micamente -->
                    </div>
                    <button onclick="copyText('condicionesText')" class="copy-btn bg-nu-purple text-white px-6 py-3 rounded-lg hover:bg-nu-purple-dark transition-colors flex items-center space-x-2 w-full justify-center">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        <span>Copiar Texto de Condiciones</span>
                    </button>
                    <label class="flex items-center space-x-3 cursor-pointer mt-4">
                        <input type="checkbox" id="checkCondiciones" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                        <span class="text-gray-700">Condiciones informadas al cliente</span>
                    </label>
                </div>

                <!-- Aceptaci√≥n del Cliente -->
                <div class="bg-nu-warning/10 rounded-xl p-4 border-2 border-nu-warning/30">
                    <h4 class="font-semibold text-gray-700 mb-3">‚úã Validaci√≥n de Aceptaci√≥n</h4>
                    <p class="text-gray-600 mb-3"><strong>[AGENT]</strong> - ¬øCliente acept√≥ textualmente t√©rminos y condiciones para seguir con el proceso de cancelaci√≥n?</p>
                    
                    <div class="bg-white rounded-lg p-4 border border-gray-200 mb-4">
                        <p class="font-medium text-gray-700 mb-2">Frases de aceptaci√≥n permitidas:</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="bg-nu-success/20 text-nu-success px-3 py-1 rounded-full text-sm font-medium">"S√≠"</span>
                            <span class="bg-nu-success/20 text-nu-success px-3 py-1 rounded-full text-sm font-medium">"S√≠, estoy de acuerdo"</span>
                            <span class="bg-nu-success/20 text-nu-success px-3 py-1 rounded-full text-sm font-medium">"Estoy de acuerdo"</span>
                        </div>
                    </div>

                    <label class="flex items-center space-x-3 cursor-pointer">
                        <input type="checkbox" id="checkAceptacion" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                        <span class="text-gray-700 font-medium">‚úÖ Cliente acept√≥ textualmente (S√≠/De acuerdo)</span>
                    </label>
                </div>
            </div>

            <!-- SECTION 6: Cierre y Seguimiento -->
            <div class="section-card bg-white rounded-2xl shadow-md p-6 mb-6 slide-in" style="animation-delay: 0.5s">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-nu-purple rounded-full flex items-center justify-center text-white font-bold">5</div>
                    <h3 class="text-xl font-bold text-gray-800">Cierre y Seguimiento</h3>
                    <span id="section5Status" class="ml-auto px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-600">Pendiente</span>
                </div>

                <!-- Secondary Job Alert -->
                <div class="bg-nu-purple/10 rounded-xl p-4 mb-4 border-2 border-nu-purple/30">
                    <div class="flex items-start space-x-3">
                        <div class="w-10 h-10 bg-nu-purple rounded-full flex items-center justify-center flex-shrink-0">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-bold text-nu-purple">üìå Importante - Casos Escalados (Secondary Job)</h4>
                            <p class="text-gray-700 mt-1">Para todo caso que sea escalado por <strong>Secondary Job</strong> para que otro agente especializado anule el producto, <strong>DEBE informar la macro de "Mis casos"</strong> al cliente.</p>
                        </div>
                    </div>
                </div>

                <!-- Mensaje de Seguimiento -->
                <div class="bg-nu-gray rounded-xl p-4 mb-4">
                    <h4 class="font-semibold text-gray-700 mb-3">üì± Mensaje de Seguimiento (OBLIGATORIO)</h4>
                    <p class="text-sm text-gray-600 mb-3">Informar al cliente c√≥mo ver el caso en la App:</p>
                    <div id="seguimientoText" class="bg-white rounded-lg p-4 border border-gray-200 text-gray-700">
                        <p class="mb-2"><strong>1.</strong> Abre tu app y selecciona el icono <span class="text-xl">‚ùì</span></p>
                        <p class="mb-2"><strong>2.</strong> Selecciona la campana <span class="text-xl">üîî</span></p>
                        <p class="mb-2"><strong>3.</strong> Abrir <strong>"Mis casos"</strong></p>
                        <p class="text-gray-500 text-sm mt-3">All√≠ podr√°s ver el estado de tu solicitud.</p>
                    </div>
                    <button onclick="copyMisCasos()" class="copy-btn mt-3 bg-nu-purple text-white px-4 py-2 rounded-lg hover:bg-nu-purple-dark transition-colors flex items-center space-x-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        <span>Copiar Instrucciones</span>
                    </button>
                    <label class="flex items-center space-x-3 cursor-pointer mt-4">
                        <input type="checkbox" id="checkSeguimiento" onchange="updateProgress()" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                        <span class="text-gray-700">Instrucciones de seguimiento informadas</span>
                    </label>
                </div>

                <!-- Aproximaci√≥n de Saldo -->
                <div class="bg-nu-warning/10 rounded-xl p-4 border-2 border-nu-warning/30">
                    <h4 class="font-semibold text-nu-warning mb-3">‚ö†Ô∏è Aproximaci√≥n de Saldo</h4>
                    <div class="flex items-start space-x-3 mb-4">
                        <svg class="w-6 h-6 text-nu-warning flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                        </svg>
                        <div>
                            <p class="text-gray-700">Si hay saldo <strong>INFERIOR a $0.99</strong>, se debe solicitar autorizaci√≥n para aproximaci√≥n.</p>
                            <p class="text-gray-600 text-sm mt-2">‚ö†Ô∏è El valor a ajustar <strong>NO PUEDE ser superior a $0.99</strong>. Revisar en <strong>Boxes</strong> y <strong>Cajitas</strong> para confirmar que no hay saldos.</p>
                        </div>
                    </div>
                    <label class="flex items-center space-x-3 cursor-pointer">
                        <input type="checkbox" id="checkAproximacion" class="w-5 h-5 rounded border-2 border-gray-300 text-nu-purple focus:ring-nu-purple">
                        <span class="text-gray-700">N/A o Aproximaci√≥n solicitada (si aplica)</span>
                    </label>
                </div>
            </div>

            <!-- Final Button -->
            <div id="finalSection" class="bg-white rounded-2xl shadow-md p-6 mb-6">
                <div class="text-center">
                    <div id="completionMessage" class="hidden mb-6">
                        <div class="w-20 h-20 mx-auto bg-nu-success rounded-full flex items-center justify-center mb-4">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-nu-success">¬°Proceso Completado!</h3>
                        <p class="text-gray-600 mt-2">Has completado todos los pasos del proceso de cancelaci√≥n.</p>
                    </div>
                    <button id="finalizarBtn" onclick="finalizarProceso()" disabled class="bg-gray-300 text-gray-500 px-8 py-4 rounded-xl text-lg font-bold cursor-not-allowed transition-all duration-300">
                        Completar todos los pasos para finalizar
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-nu-success text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 z-50">
        <div class="flex items-center space-x-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <span id="toastMessage">Texto copiado al portapapeles</span>
        </div>
    </div>

    <script>
        // Data
        let selectedProduct = null;
        let totalChecks = 0;
        let completedChecks = 0;

        const wedukaLinks = {
            'credito': [
                { name: 'Cancelaci√≥n - Tarjeta cr√©dito', url: 'https://nucolombia.myweduka.com/DocumentFind/Document?idDocument=4390&logType=12&idlogSearch=904000' }
            ],
            'nucontrol': [
                { name: 'Cancelaci√≥n - Tarjeta cr√©dito Nucontrol', url: 'https://nucolombia.myweduka.com/DocumentFind/Document?idDocument=4391&logType=12&idlogSearch=904000' }
            ],
            'cuenta': [
                { name: 'AHORROS - Cancelaci√≥n de Cuenta de Ahorros', url: 'https://nucolombia.myweduka.com/DocumentFind/Document?idDocument=4455&logType=12&idlogSearch=904000' }
            ],
            'multiproducto': [
                { name: 'Cancelaci√≥n - Tarjeta d√©bito y cuenta de ahorros', url: 'https://nucolombia.myweduka.com/DocumentFind/Document?idDocument=4389&logType=12&idlogSearch=904000' },
                { name: 'Cancelaci√≥n - Tarjeta cr√©dito', url: 'https://nucolombia.myweduka.com/DocumentFind/Document?idDocument=4390&logType=12&idlogSearch=904000' }
            ]
        };

        const productNames = {
            'credito': 'Tarjeta de Cr√©dito Tradicional',
            'nucontrol': 'Tarjeta Nu Control / Abre Caminos',
            'cuenta': 'Cuenta de Ahorros (D√©bito)',
            'multiproducto': 'Multiproducto (Cr√©dito + D√©bito)'
        };

        const motivos = {
            'credito': [
                { value: 'cupo_bajo', label: 'Cupo bajo / Quiere aumento de cupo' },
                { value: 'solo_cuenta', label: 'Solo quer√≠a la cuenta' },
                { value: 'capacidad_endeudamiento', label: 'Afecta capacidad de endeudamiento' },
                { value: 'no_usa', label: 'No la usa / No especifica motivos' },
                { value: 'mala_experiencia', label: 'Mala experiencia con otros equipos' },
                { value: 'mala_entrega', label: 'Mala experiencia con la entrega' }
            ],
            'nucontrol': [
                { value: 'porque_nucontrol', label: '¬øPor qu√© me dieron la NuControl?' },
                { value: 'pago_total', label: 'Quiere evitar cuota de manejo (Pago total)' },
                { value: 'minimo_compras', label: 'Quiere evitar cuota de manejo (M√≠nimo compras)' },
                { value: 'sin_limite', label: 'A√∫n no recibe un l√≠mite garantizado por Nu' },
                { value: 'no_usa', label: 'No la usa / No especifica motivos' },
                { value: 'mala_experiencia', label: 'Mala experiencia con otros equipos' }
            ],
            'cuenta': [
                { value: 'producto_no_ofertado', label: 'Producto no ofertado (quer√≠a cr√©dito)' },
                { value: 'no_usa', label: 'No la usa / No especifica motivos' },
                { value: 'tasa_rendimiento', label: 'Disminuci√≥n tasa de rendimiento' },
                { value: 'tiene_cdt', label: 'Quiere cancelar pero tiene CDT vigente' },
                { value: 'mala_experiencia', label: 'Mala experiencia con otros equipos' },
                { value: 'mala_entrega', label: 'Mala experiencia con la entrega' }
            ],
            'multiproducto': [
                { value: 'abre_caminos_cuenta', label: 'Cancelar cuenta (tiene Abre Caminos)' },
                { value: 'no_usa', label: 'No los usa / No especifica motivos' },
                { value: 'mala_experiencia', label: 'Mala experiencia con otros equipos' },
                { value: 'mala_entrega', label: 'Mala experiencia con la entrega' }
            ]
        };

        const retenciones = {
            'cupo_bajo': `Entendemos que es importante para ti tener un mayor cupo en tu tarjeta, as√≠ que queremos explicarte c√≥mo funciona nuestro proceso de aumento de cupo:

‚óè Comportamiento de pago: Pagar a tiempo y en su totalidad.
‚óè Uso de la tarjeta: Usar la tarjeta regularmente.
‚óè Ingresos y egresos: Mantener un equilibrio saludable.
‚óè Perfil de cr√©dito: Reportes en centrales de riesgo, experiencia y capacidad de endeudamiento.`,

            'solo_cuenta': `Lamento saber qu√© est√°s pensando en cancelar tu tarjeta de cr√©dito Nu. Queremos ofrecerte algunas alternativas para que lo consideres antes de tomar una decisi√≥n final:

Si no vas a usarla, puedes reducir el l√≠mite de tu tarjeta pues dejando el l√≠mite en $0, este ser√≠a el monto reportado a centrales de riesgo y no afectar√≠a tu capacidad de endeudamiento.

Adem√°s, me gustar√≠a mencionarte los beneficios de conservar tu tarjeta de cr√©dito:
‚óè Mantener tu tarjeta activa puede mejorar tu puntaje crediticio.
‚óè Por flexibilidad financiera es √∫til tener una tarjeta disponible para emergencias o gastos imprevistos.
‚óè Costo $0: No cobramos cuota de manejo, tarifas ocultas ni seguros adicionales.

¬øTe gustar√≠a considerar ajustar tu l√≠mite de cr√©dito o alguna otra opci√≥n antes de cancelar?`,

            'capacidad_endeudamiento': `Entendemos tu decisi√≥n de cancelar tu Tarjeta de cr√©dito Nu, aunque nos encantar√≠a que siguieras contando con nosotros como un aliado para la construcci√≥n de tus proyectos financieros.

Es por esta raz√≥n que preparamos para ti una alternativa que permite reducir el l√≠mite de tu tarjeta al m√≠nimo. Esto te ayudar√° con tu meta de aumentar tu capacidad de endeudamiento mientras sigues disfrutando de todos los beneficios de Nu.

Puedes hacer esto f√°cilmente desde nuestra app, en la secci√≥n "Ajustar L√≠mite". ¬øTe gustar√≠a saber c√≥mo hacerlo? Con gusto puedo compartirte el paso a paso para que puedas ajustarlo.

Con Nu mantendr√°s el control de tu vida financiera, usando tu Tarjeta de cr√©dito cuando la necesites.`,

            'producto_no_ofertado': `Nos alegra saber de tu inter√©s en la Tarjeta de Cr√©dito Nu.

En Nu lo m√°s importante es la transparencia, por eso te cuento que cuando aplicas a Nu, nuestro modelo de riesgo eval√∫a la posibilidad de ofrecerte uno o m√°s productos.

Ten presente que este modelo eligi√≥ el producto que se ajusta mejor a tu perfil y fue la Cuenta de Ahorros Nu. ¬°Esto es una excelente noticia! Pues con ella, dejando tus ahorros dentro de las cajitas, adem√°s de estar seguros, ver√°s c√≥mo crecen generando rendimientos diarios con una tasa de rendimiento competitiva.

As√≠ mismo, queremos decirte que no te desanimes, ya que el "no" de la tarjeta de cr√©dito no es definitivo. Si ya eres un feliz cliente de nuestra Cuenta de ahorros Nu, ¬°tenemos buenas noticias! Pues no necesitas volver a registrarte en nuestra web para obtener m√°s productos. Cuando tengamos algo nuevo y emocionante para ti, lo podr√°s ver directamente en tu app con toda la informaci√≥n necesaria.

Agradecemos mucho tu confianza y esperamos que nuestra Cuenta Nu pueda cumplir tus necesidades.`,

            'no_usa': `Entendemos y respetamos tu decisi√≥n, sin embargo, antes de que tomes una decisi√≥n final, quiero recordarte lo incre√≠ble que es tu producto Nu:

‚óè $0 cuota de manejo: Sin cargos adicionales que complican las cosas. ¬°Todo claro y simple!
‚óè Sin anualidades: Cero sorpresas y cero cargos anuales.
‚óè Sin cobros por seguros: Nos centramos en lo que realmente importa, sin costos inesperados.
‚óè Cajitas de ahorro: Puedes crear cajitas con una de las tasas m√°s competitivas del mercado, y si tienes unos ahorros guardados debajo del colch√≥n o en tu alcanc√≠a, puedes depositarlos a tu Cuenta Nu para tenerlos a salvo y ver c√≥mo crecen tus rendimientos ¬°a diario!

Estamos aqu√≠ para simplificar tu vida financiera y hacerla m√°s beneficiosa para ti.`,

            'tasa_rendimiento': `Entiendo que est√°s considerando cancelar tu Cuenta Nu debido a los recientes cambios en la tasa de rendimiento.

Por favor, antes de que tomes una decisi√≥n, me gustar√≠a contarte por qu√© la Cuenta Nu sigue siendo una excelente opci√≥n para hacer crecer tu dinero:

‚éº Cuentas claras amistades largas: Siempre buscamos darte la informaci√≥n de una manera simple, oportuna y transparente, sin complejidad financiera, para que siempre tomes las mejores decisiones sobre tu dinero.
‚éº Rendimiento atractivo: una de las tasas m√°s competitivas del mercado, con rendimientos diarios, que ves crecer d√≠a a d√≠a en tus Cajitas de ahorro, ayud√°ndote a alcanzar tus metas financieras.
‚éº Sin costos: No hay comisiones ni costos de administraci√≥n

¬øTe gustar√≠a seguir viendo crecer tu dinero d√≠a a d√≠a con tu Cuenta Nu?

Si deseas obtener m√°s informaci√≥n sobre por qu√© cambian, te invitamos a consultar nuestro blog:
https://blog.nu.com.co/por-que-pueden-cambiar-las-tasas-de-rendimiento/`,

            'mala_entrega': `Siempre buscamos brindarte el mejor servicio y entendemos lo importante que es para ti recibir la tarjeta a tiempo.

Para nosotros es de suma importancia poder ayudarte a resolver esta situaci√≥n. Queremos asegurarnos de que recibas tu tarjeta lo antes posible y que tengas una experiencia positiva con nosotros.

Con la intenci√≥n de ayudarte a solucionar el problema con la entrega de tu tarjeta, te ofrezco comunicarte con uno de nuestros compa√±eros especialistas, que se encargar√° de brindarte la asistencia necesaria.

¬øTe parece bien que te ponga en contacto con ellos? üòä`,

            'porque_nucontrol': `Despu√©s de revisar tu solicitud, creemos que la tarjeta NuControl sigue siendo una gran opci√≥n para ti. Est√° dise√±ada para ayudarte a construir y fortalecer tu vida crediticia. Y aqu√≠ viene lo mejor: no tendr√°s que pagar el valor de la cuota de manejo, siempre y cuando no hagas uso de tu tarjeta, para el periodo de facturaci√≥n cerrado, en el cual:

- No hayas usado la tarjeta, es decir, que no realices compras o avances nuevos.
- No tengas transacciones pendientes de meses anteriores (cuotas pendientes por pagar).
- No tengas intereses por compras diferidas.

As√≠ mismo, te cuento que, para que el cobro de la cuota de manejo pueda ser ajustada, por el momento, debes contactarnos en cada ciclo siempre y cuando se cumplan las condiciones para el mismo.`,

            'pago_total': `Despu√©s de revisar tu solicitud, creemos que la tarjeta NuControl sigue siendo una gran opci√≥n para ti. Adem√°s de ayudarte a construir y mejorar tu vida crediticia, te ofrece beneficios √∫nicos.

Uno de ellos es que, si realizas el pago de tu deuda antes de la fecha l√≠mite de pago, en tu siguiente fecha de corte, no tendr√°s que pagar el cargo por Cuota de manejo.

Por ejemplo: Si tu fecha l√≠mite es el pr√≥ximo XX y realizas el pago de tu deuda total antes de dicha fecha, para tu siguiente corte de facturaci√≥n (XXXX) ser√°s exonerado de la cuota de manejo y as√≠ sucesivamente todos los meses que cumplas con la condici√≥n.`,

            'minimo_compras': `Lamentamos que quieras cancelar tu Tarjeta de Cr√©dito NuControl, un producto que te ayudar√° a construir y fortalecer tu vida crediticia. Recuerda que este producto tiene un gran beneficio sobre la cuota de manejo, si cumples con el m√≠nimo de compras establecido antes de tu siguiente fecha de corte.

Esto quiere decir que, si al faltar un d√≠a para tu pr√≥ximo corte de facturaci√≥n, has acumulado o realizado un m√≠nimo de 7 transacciones con tu Tarjeta de Cr√©dito NuControl, ser√°s exonerado de la cuota de manejo.`,

            'sin_limite': `En Nu lo m√°s importante es la transparencia, por eso, queremos comentarte que la posibilidad de que accedas a un l√≠mite de cr√©dito adicional no garantizado se evaluar√° por nuestro sistema despu√©s de un an√°lisis realizado. Sin embargo, no podemos garantizarte en qu√© momento se generar√° esta posibilidad para tu Tarjeta Morada Abre Caminos. Cumplir con tus misiones aumentar√° la probabilidad de que Nu te ofrezca la posibilidad de optar por un l√≠mite de cr√©dito no garantizado.`,

            'mala_experiencia': `Entiendo que est√©s considerando cancelar tu producto debido a los inconvenientes presentados con [ESCRIBE AQU√ç EL INCONVENIENTE]. Si est√°s de acuerdo, puedo transferirte con el √°rea encargada, donde uno de mis compa√±eros estar√° en total disposici√≥n de ayudarte.`,

            'tiene_cdt': `Entendemos y respetamos tu decisi√≥n de cancelar la cuenta de ahorros Nu, sin embargo, antes de que tomes una decisi√≥n final, quiero recordarte lo incre√≠ble que es la cuenta Nu:

‚Üí Sin anualidades: Cero sorpresas y cero cargos anuales.
‚Üí Sin cobros por seguros: Nos centramos en lo que realmente importa, sin costos inesperados.
‚Üí Y lo mejor Cajitas de ahorro: Puedes crear cajitas con una de las tasas m√°s competitivas del mercado, y si tienes unos ahorros guardados debajo del colch√≥n o en tu alcanc√≠a, puedes depositarlos a tu Cuenta Nu para tenerlos a salvo y ver c√≥mo crecen tus rendimientos ¬°a diario!

Es importante que recuerdes que aunque canceles tu cuenta de ahorros, si tienes CDT activos solo podr√°s acceder a estos recursos una vez llegue a su fecha de madurez.`,

            'abre_caminos_cuenta': `Entendemos qu√© est√°s pensando en cancelar tu Cuenta de Ahorros. Antes de tomar una decisi√≥n, queremos recordarte que esto tambi√©n afecta tu Tarjeta Morada Abre Caminos, ya que el cupo de la misma depende de la Cajita de Respaldo.

Antes de continuar, quiero recordarte los beneficios que obtienes al ser parte de Nu.

Respecto a tu Cuenta Nu:
‚Üí Puedes ver tu dinero crecer todos los d√≠as, con una de las tasas de rentabilidad m√°s competitivas del mercado.
‚Üí Dispones de tu dinero 24/7, sin condiciones.
‚Üí $0 cuota de manejo ni anualidades.
‚Üí Puedes realizar transferencias gratuitas, inmediatas e ilimitadas a cualquier banco.
‚Üí Te permite retirar efectivo en cualquier cajero electr√≥nico de la red Mastercard, con 1 retiro gratis al mes.

En tu Tarjeta Morada Abre Caminos:
‚Üí 0% inter√©s en compras que hayas hecho a una cuota.
‚Üí Impulsar tu historial de cr√©dito, para aumentar la probabilidad de un l√≠mite de cr√©dito de Nu.
‚Üí $0 costo por el uso de los beneficios Mastercard Gold.
‚Üí Pagos desde Google Pay y Apple Pay.

¬øTe gustar√≠a considerar los beneficios mencionados o alguna otra opci√≥n antes de cancelar?`
        };

        const beneficios = {
            'credito': `<h4 class="font-bold text-nu-success mb-3">üåü Beneficios de tu Tarjeta de Cr√©dito Nu:</h4>
<ul class="space-y-2">
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>$0 cuota de manejo, tarifas ocultas ni seguros adicionales</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Mantener tu tarjeta activa puede mejorar tu puntaje crediticio</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Flexibilidad financiera para emergencias o gastos imprevistos</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Posibilidad de ajustar el l√≠mite de cr√©dito desde la app</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>M√°s informaci√≥n: <a href="https://nu.com.co/credito/condiciones/" target="_blank" class="text-nu-purple underline">nu.com.co/credito/condiciones/</a></span>
    </li>
</ul>`,

            'nucontrol': `<h4 class="font-bold text-nu-success mb-3">üåü Beneficios de tu Tarjeta Morada Abre Caminos:</h4>
<ul class="space-y-2">
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>0% inter√©s en compras que hayas hecho a una cuota</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Impulsar tu historial de cr√©dito, aumentando la probabilidad de un l√≠mite de cr√©dito de Nu</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>$0 costo por el uso de los beneficios Mastercard Gold</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Pagos desde Google Pay y Apple Pay</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Posibilidad de exoneraci√≥n de cuota de manejo cumpliendo condiciones</span>
    </li>
</ul>`,

            'cuenta': `<h4 class="font-bold text-nu-success mb-3">üåü Beneficios de tu Cuenta de Ahorros Nu:</h4>
<ul class="space-y-2">
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>$0 cuota de manejo ni anualidades</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Sin cobros por seguros</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Cajitas de ahorro con una de las tasas m√°s competitivas del mercado</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Rendimientos diarios que ves crecer d√≠a a d√≠a</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Dispones de tu dinero 24/7, sin condiciones</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Transferencias gratuitas, inmediatas e ilimitadas a cualquier banco</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>1 retiro gratis al mes en cualquier cajero de la red Mastercard</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>M√°s informaci√≥n: <a href="https://nu.com.co/cf/cuenta-condiciones/" target="_blank" class="text-nu-purple underline">nu.com.co/cf/cuenta-condiciones/</a></span>
    </li>
</ul>`,

            'multiproducto': `<h4 class="font-bold text-nu-success mb-3">üåü Beneficios de tu Cuenta de Ahorros Nu:</h4>
<ul class="space-y-2 mb-4">
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>$0 cuota de manejo ni anualidades</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Cajitas de ahorro con una de las tasas m√°s competitivas del mercado</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Rendimientos diarios que ves crecer d√≠a a d√≠a</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Transferencias gratuitas, inmediatas e ilimitadas</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>1 retiro gratis al mes en cajeros Mastercard</span>
    </li>
</ul>
<h4 class="font-bold text-nu-success mb-3">üåü Beneficios de tu Tarjeta de Cr√©dito Nu:</h4>
<ul class="space-y-2">
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>$0 cuota de manejo, tarifas ocultas ni seguros</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Mejora tu puntaje crediticio</span>
    </li>
    <li class="flex items-start space-x-2">
        <span class="text-nu-success">‚úì</span>
        <span>Flexibilidad financiera para emergencias</span>
    </li>
</ul>`
        };

        const condiciones = {
            'credito': `Comprendo. Si deseas conocer m√°s beneficios de la tarjeta Cr√©dito puedes ingresar a este link: https://nu.com.co/credito/condiciones/

Si prefieres continuar con la cancelaci√≥n, por favor ten en cuenta estas condiciones:

- La cancelaci√≥n es irreversible; no podr√°s solicitar la tarjeta de nuevo con las mismas condiciones.
- Debes pagar todos los cargos pendientes por intereses de compras a cuotas, antes de cancelar.
- Si tienes un contracargo pendiente, debemos esperar a su resoluci√≥n.

¬øEst√°s de acuerdo con las condiciones de cancelaci√≥n para tu tarjeta de cr√©dito?`,

            'nucontrol': `Entiendo que desees proceder con la cancelaci√≥n, aunque me encantar√≠a que siguieras con nosotros. Ahora te ayudar√© a gestionar este proceso de la manera m√°s r√°pida posible.

Antes de continuar, quiero recordarte los beneficios que obtienes al ser parte de Nu.

En tu Tarjeta Morada Abre Caminos:
‚Üí 0% inter√©s en compras que hayas hecho a una cuota.
‚Üí Impulsar tu historial de cr√©dito, lo que ayudar√° aumentar la probabilidad de un l√≠mite de cr√©dito de Nu
‚Üí $0 costo por el uso de los beneficios Mastercard Gold.
‚Üí Pagos desde Google Pay y Apple Pay.

¬øEst√°s seguro/a de que deseas continuar con la cancelaci√≥n o te gustar√≠a continuar con tu Tarjeta Morada de Cr√©dito Abre Caminos?

---

Si prefieres continuar con la cancelaci√≥n de tu Tarjeta Morada Abre Caminos Nu, por favor ten en cuenta estas condiciones:

- La cancelaci√≥n es irreversible; no podr√°s solicitar la tarjeta de nuevo con las mismas condiciones.
- Debes pagar todos los cargos pendientes por intereses de compras a cuotas, antes de cancelar.
- Si tienes un contracargo pendiente, debemos esperar a su resoluci√≥n.

¬øEst√°s de acuerdo con las condiciones de cancelaci√≥n para tu Tarjeta Morada Abre Caminos Nu?`,

            'cuenta': `Comprendo. Si deseas conocer m√°s beneficios de tu Cuenta de Ahorros puedes ingresar a este link: https://nu.com.co/cf/cuenta-condiciones/

Si prefieres continuar con la cancelaci√≥n, por favor ten en cuenta estas condiciones:

- Verificaremos cuenta en $0,00: es decir que no haya movimientos pendientes ni dinero en tus cajitas.
- Tras la cancelaci√≥n no podr√°s enviar/recibir transferencias ni generar rendimientos.
- Finalizando, tus tarjetas d√©bito Nu no podr√°n usarse.
- Podr√°s reactivar la cuenta registr√°ndote de nuevo en la app.
- Si tienes un contracargo pendiente, debemos esperar a su resoluci√≥n.

¬øEst√°s de acuerdo con las condiciones de cancelaci√≥n para tu cuenta de ahorros?`,

            'multiproducto': `üìå CONDICIONES PARA CUENTA DE AHORROS:

Comprendo. Si deseas conocer m√°s beneficios de tu Cuenta de Ahorros puedes ingresar a este link: https://nu.com.co/cf/cuenta-condiciones/

Si prefieres continuar con la cancelaci√≥n, por favor ten en cuenta estas condiciones:

- Verificaremos cuenta en $0,00: es decir que no haya movimientos pendientes ni dinero en tus cajitas.
- Tras la cancelaci√≥n no podr√°s enviar/recibir transferencias ni generar rendimientos.
- Finalizando, tus tarjetas d√©bito Nu no podr√°n usarse.
- Podr√°s reactivar la cuenta registr√°ndote de nuevo en la app.
- Si tienes un contracargo pendiente, debemos esperar a su resoluci√≥n.

---

üìå CONDICIONES PARA TARJETA DE CR√âDITO:

Si deseas conocer m√°s beneficios de la tarjeta Cr√©dito puedes ingresar a este link: https://nu.com.co/credito/condiciones/

Si prefieres continuar con la cancelaci√≥n, por favor ten en cuenta estas condiciones:

- La cancelaci√≥n es irreversible; no podr√°s solicitar la tarjeta de nuevo con las mismas condiciones.
- Debes pagar todos los cargos pendientes por intereses de compras a cuotas, antes de cancelar.
- Si tienes un contracargo pendiente, debemos esperar a su resoluci√≥n.

¬øEst√°s de acuerdo con las condiciones de cancelaci√≥n para ambos productos?`
        };

        // Functions
        function selectProduct(product) {
            selectedProduct = product;
            document.getElementById('productSelection').classList.add('hidden');
            document.getElementById('checklistContainer').classList.remove('hidden');
            document.getElementById('progressContainer').classList.remove('hidden');
            document.getElementById('selectedProductName').textContent = productNames[product];
            
            // Show Weduka links
            const linksContainer = document.getElementById('wedukaLinksContainer');
            linksContainer.innerHTML = '';
            wedukaLinks[product].forEach(link => {
                const a = document.createElement('a');
                a.href = link.url;
                a.target = '_blank';
                a.className = 'bg-nu-purple text-white px-3 py-1 rounded-lg text-sm hover:bg-nu-purple-dark transition-colors';
                a.textContent = link.name;
                linksContainer.appendChild(a);
            });

            // Show alert for cuenta and multiproducto about Abre Caminos
            if (product === 'cuenta' || product === 'multiproducto') {
                document.getElementById('abreCaminosAlert').classList.remove('hidden');
            }

            // Show/hide checks seg√∫n producto
            const checksCreditoContainer = document.getElementById('checksCreditoContainer');
            const checksCuentaContainer = document.getElementById('checksCuentaContainer');
            const checkCajitaRespaldoContainer = document.getElementById('checkCajitaRespaldoContainer');

            // Ocultar todos primero
            checksCreditoContainer.classList.add('hidden');
            checksCuentaContainer.classList.add('hidden');
            checkCajitaRespaldoContainer.classList.add('hidden');

            // Mostrar seg√∫n producto
            if (product === 'credito') {
                checksCreditoContainer.classList.remove('hidden');
            } else if (product === 'nucontrol') {
                checksCreditoContainer.classList.remove('hidden');
                checkCajitaRespaldoContainer.classList.remove('hidden');
            } else if (product === 'cuenta') {
                checksCuentaContainer.classList.remove('hidden');
            } else if (product === 'multiproducto') {
                checksCreditoContainer.classList.remove('hidden');
                checksCuentaContainer.classList.remove('hidden');
                checkCajitaRespaldoContainer.classList.remove('hidden');
            }

            // Populate motivos dropdown
            const select = document.getElementById('motivoSelect');
            select.innerHTML = '<option value="">-- Selecciona un motivo --</option>';
            motivos[product].forEach(m => {
                const option = document.createElement('option');
                option.value = m.value;
                option.textContent = m.label;
                select.appendChild(option);
            });

            // Set beneficios
            document.getElementById('beneficiosContent').innerHTML = beneficios[product];

            // Set condiciones
            document.getElementById('condicionesText').textContent = condiciones[product];

            updateProgress();
        }

        function resetSelection() {
            selectedProduct = null;
            document.getElementById('productSelection').classList.remove('hidden');
            document.getElementById('checklistContainer').classList.add('hidden');
            document.getElementById('progressContainer').classList.add('hidden');
            document.getElementById('abreCaminosAlert').classList.add('hidden');
            document.getElementById('checkCajitaRespaldoContainer').classList.add('hidden');
            document.getElementById('checksCreditoContainer').classList.add('hidden');
            document.getElementById('checksCuentaContainer').classList.add('hidden');
            
            // Reset all checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('input[type="radio"]').forEach(rb => rb.checked = false);
            document.getElementById('motivoSelect').value = '';
            document.getElementById('retencionContainer').classList.add('hidden');
            document.getElementById('hardFilterAlert').classList.add('hidden');
            document.getElementById('deviceAlert').classList.add('hidden');
            document.getElementById('completionMessage').classList.add('hidden');
            
            const btn = document.getElementById('finalizarBtn');
            btn.disabled = true;
            btn.className = 'bg-gray-300 text-gray-500 px-8 py-4 rounded-xl text-lg font-bold cursor-not-allowed transition-all duration-300';
            btn.textContent = 'Completar todos los pasos para finalizar';
            btn.classList.remove('hidden');
        }

        function showRetencion() {
            const motivo = document.getElementById('motivoSelect').value;
            const container = document.getElementById('retencionContainer');
            const text = document.getElementById('retencionText');
            
            if (motivo && retenciones[motivo]) {
                text.textContent = retenciones[motivo];
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
        }

        function validateHardFilters() {
            const hf1 = document.getElementById('checkHardFilter1').checked;
            const hf2 = document.getElementById('checkHardFilter2').checked;
            const alert = document.getElementById('hardFilterAlert');
            
            if ((hf1 && !hf2) || (!hf1 && hf2)) {
                alert.classList.remove('hidden');
            } else {
                alert.classList.add('hidden');
            }
        }

        function checkDeviceStatus() {
            const untrusted = document.getElementById('deviceUntrusted').checked;
            const alert = document.getElementById('deviceAlert');
            
            if (untrusted) {
                alert.classList.remove('hidden');
            } else {
                alert.classList.add('hidden');
            }
        }

        function updateProgress() {
            // Checks base que siempre aplican
            const checks = [
                'checkSaludo', 'checkHardFilter1', 'checkHardFilter2', 'checkMotivo',
                'checkComplaints', 'checkCondiciones', 'checkAceptacion', 'checkSeguimiento'
            ];
            
            // Checks espec√≠ficos seg√∫n producto
            if (selectedProduct === 'credito') {
                checks.push('checkDeuda', 'checkContracargoCredito', 'checkTagsCredito');
            } else if (selectedProduct === 'nucontrol') {
                checks.push('checkDeuda', 'checkContracargoCredito', 'checkTagsCredito', 'checkCajitaRespaldo');
            } else if (selectedProduct === 'cuenta') {
                checks.push('checkSaldo', 'checkCDT', 'checkSaldoFavor', 'checkContracargoCuenta', 'checkTagsCuenta');
            } else if (selectedProduct === 'multiproducto') {
                // Todos los checks de cr√©dito y cuenta
                checks.push('checkDeuda', 'checkContracargoCredito', 'checkTagsCredito', 'checkCajitaRespaldo');
                checks.push('checkSaldo', 'checkCDT', 'checkSaldoFavor', 'checkContracargoCuenta', 'checkTagsCuenta');
            }

            // Check for device trusted
            const deviceTrusted = document.getElementById('deviceTrusted').checked;

            let completed = 0;
            checks.forEach(id => {
                const el = document.getElementById(id);
                if (el && el.checked) completed++;
            });
            if (deviceTrusted) completed++;

            totalChecks = checks.length + 1; // +1 for device
            completedChecks = completed;

            const percentage = Math.round((completed / totalChecks) * 100);
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '%';

            // Update section statuses
            updateSectionStatus('section1Status', ['checkSaludo', 'checkHardFilter1', 'checkHardFilter2'], deviceTrusted);
            updateSectionStatus('section2Status', ['checkMotivo']);
            
            // Section 3 checks seg√∫n producto
            let section3Checks = ['checkComplaints'];
            if (selectedProduct === 'credito') {
                section3Checks = section3Checks.concat(['checkDeuda', 'checkContracargoCredito', 'checkTagsCredito']);
            } else if (selectedProduct === 'nucontrol') {
                section3Checks = section3Checks.concat(['checkDeuda', 'checkContracargoCredito', 'checkTagsCredito', 'checkCajitaRespaldo']);
            } else if (selectedProduct === 'cuenta') {
                section3Checks = section3Checks.concat(['checkSaldo', 'checkCDT', 'checkSaldoFavor', 'checkContracargoCuenta', 'checkTagsCuenta']);
            } else if (selectedProduct === 'multiproducto') {
                section3Checks = section3Checks.concat(['checkDeuda', 'checkContracargoCredito', 'checkTagsCredito', 'checkCajitaRespaldo']);
                section3Checks = section3Checks.concat(['checkSaldo', 'checkCDT', 'checkSaldoFavor', 'checkContracargoCuenta', 'checkTagsCuenta']);
            }
            updateSectionStatus('section3Status', section3Checks);
            updateSectionStatus('section4Status', ['checkCondiciones', 'checkAceptacion']);
            updateSectionStatus('section5Status', ['checkSeguimiento']);

            // Enable/disable final button
            const hardFilter1 = document.getElementById('checkHardFilter1').checked;
            const hardFilter2 = document.getElementById('checkHardFilter2').checked;
            const allComplete = percentage === 100 && hardFilter1 && hardFilter2 && deviceTrusted;
            const btn = document.getElementById('finalizarBtn');
            
            if (allComplete) {
                btn.disabled = false;
                btn.className = 'bg-nu-success text-white px-8 py-4 rounded-xl text-lg font-bold hover:bg-green-600 transition-all duration-300 transform hover:scale-105';
                btn.textContent = '‚úì Finalizar Cancelaci√≥n';
            } else {
                btn.disabled = true;
                btn.className = 'bg-gray-300 text-gray-500 px-8 py-4 rounded-xl text-lg font-bold cursor-not-allowed transition-all duration-300';
                btn.textContent = 'Completar todos los pasos para finalizar';
            }
        }

        function updateSectionStatus(statusId, checkIds, extraCondition = true) {
            const el = document.getElementById(statusId);
            let allChecked = extraCondition;
            
            checkIds.forEach(id => {
                const checkbox = document.getElementById(id);
                if (checkbox && !checkbox.checked) allChecked = false;
            });

            if (allChecked) {
                el.className = 'ml-auto px-3 py-1 rounded-full text-sm font-medium bg-nu-success/20 text-nu-success';
                el.textContent = '‚úì Completado';
            } else {
                el.className = 'ml-auto px-3 py-1 rounded-full text-sm font-medium bg-gray-200 text-gray-600';
                el.textContent = 'Pendiente';
            }
        }

        function copyText(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                showToast('Texto copiado al portapapeles');
            });
        }

        function copyMisCasos() {
            const text = `Para dar seguimiento a tu caso:
1. Abre tu app y selecciona el icono ‚ùì
2. Selecciona la campana üîî
3. Abrir "Mis casos"
All√≠ podr√°s ver el estado de tu solicitud.`;
            navigator.clipboard.writeText(text).then(() => {
                showToast('Instrucciones copiadas al portapapeles');
            });
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.remove('translate-y-20', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');
            
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
                toast.classList.remove('translate-y-0', 'opacity-100');
            }, 3000);
        }

        function finalizarProceso() {
            document.getElementById('completionMessage').classList.remove('hidden');
            document.getElementById('finalizarBtn').classList.add('hidden');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            showToast('¬°Proceso de cancelaci√≥n completado exitosamente!');
        }
    </script>
</body>
</html>
